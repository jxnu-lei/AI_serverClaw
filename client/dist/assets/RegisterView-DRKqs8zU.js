import{B as e,C as t,D as n,E as r,F as i,K as a,N as o,O as s,R as c,V as l,i as u,k as d,n as f}from"./index-md6nwtnd.js";import{t as p}from"./_plugin-vue_export-helper-CSBScHBl.js";import{t as m}from"./api-BFhxd5g9.js";var h={class:`register-container`},g=p(d({__name:`RegisterView`,setup(a){let d=f(),p=l(),g=l(!1),_=e({username:``,email:``,password:``,confirmPassword:``}),v={username:[{required:!0,message:`请输入用户名`,trigger:`blur`},{min:3,max:20,message:`用户名长度3-20个字符`,trigger:`blur`}],email:[{required:!0,message:`请输入邮箱`,trigger:`blur`},{type:`email`,message:`请输入正确的邮箱格式`,trigger:`blur`}],password:[{required:!0,message:`请输入密码`,trigger:`blur`},{min:6,message:`密码长度至少6个字符`,trigger:`blur`}],confirmPassword:[{required:!0,message:`请确认密码`,trigger:`blur`},{validator:(e,t,n)=>{t===_.password?n():n(Error(`两次密码输入不一致`))},trigger:`blur`}]},y=async()=>{if(p.value)try{await p.value.validate(),g.value=!0,await m.post(`/api/auth/register`,{username:_.username,email:_.email,password:_.password}),u.success(`注册成功，请登录`),d.push(`/login`)}catch(e){e.response?u.error(e.response.data.detail||`注册失败`):u.error(`网络错误，请稍后重试`)}finally{g.value=!1}},b=()=>{d.push(`/login`)};return(e,a)=>{let l=i(`el-input`),u=i(`el-form-item`),d=i(`el-button`),f=i(`el-link`),m=i(`el-form`),x=i(`el-card`);return o(),r(`div`,h,[s(x,{class:`register-card`},{header:c(()=>[...a[4]||=[t(`div`,{class:`register-header`},[t(`h2`,null,`AI Terminal`),t(`p`,null,`注册新账号`)],-1)]]),default:c(()=>[s(m,{model:_,rules:v,ref_key:`registerFormRef`,ref:p,"label-width":`80px`},{default:c(()=>[s(u,{label:`用户名`,prop:`username`},{default:c(()=>[s(l,{modelValue:_.username,"onUpdate:modelValue":a[0]||=e=>_.username=e,placeholder:`请输入用户名`,"prefix-icon":`UserFilled`},null,8,[`modelValue`])]),_:1}),s(u,{label:`邮箱`,prop:`email`},{default:c(()=>[s(l,{modelValue:_.email,"onUpdate:modelValue":a[1]||=e=>_.email=e,type:`email`,placeholder:`请输入邮箱`,"prefix-icon":`Message`},null,8,[`modelValue`])]),_:1}),s(u,{label:`密码`,prop:`password`},{default:c(()=>[s(l,{modelValue:_.password,"onUpdate:modelValue":a[2]||=e=>_.password=e,type:`password`,placeholder:`请输入密码`,"prefix-icon":`Lock`,"show-password":``},null,8,[`modelValue`])]),_:1}),s(u,{label:`确认密码`,prop:`confirmPassword`},{default:c(()=>[s(l,{modelValue:_.confirmPassword,"onUpdate:modelValue":a[3]||=e=>_.confirmPassword=e,type:`password`,placeholder:`请确认密码`,"prefix-icon":`Check`,"show-password":``},null,8,[`modelValue`])]),_:1}),s(u,null,{default:c(()=>[s(d,{type:`primary`,onClick:y,loading:g.value,style:{width:`100%`}},{default:c(()=>[...a[5]||=[n(` 注册 `,-1)]]),_:1},8,[`loading`])]),_:1}),s(u,null,{default:c(()=>[s(f,{type:`primary`,onClick:b},{default:c(()=>[...a[6]||=[n(`返回登录`,-1)]]),_:1})]),_:1})]),_:1},8,[`model`])]),_:1})])}}}),[[`__scopeId`,`data-v-bfbd13cc`]]);export{g as default};