import{K as e,i as t}from"./index-md6nwtnd.js";import{t as n}from"./axios-BQg8eLdS.js";var r=n.create({baseURL:``,timeout:3e4,headers:{"Content-Type":`application/json`}});r.interceptors.request.use(e=>{let t=localStorage.getItem(`access_token`);return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),r.interceptors.response.use(e=>e,e=>{let{response:n}=e;if(n)switch(n.status){case 401:localStorage.removeItem(`access_token`),localStorage.removeItem(`user_id`),localStorage.removeItem(`user_role`),localStorage.removeItem(`user_name`),t.error(`登录已过期，请重新登录`),window.location.href=`/login`;break;case 403:t.error(`没有权限执行此操作`);break;case 404:t.error(`请求的资源不存在`);break;case 500:t.error(`服务器内部错误`);break;default:let e=n.data?.detail||n.data?.message||`请求失败`;t.error(e)}else t.error(`网络错误，请检查网络连接`);return Promise.reject(e)});const i={get:(e,t)=>r.get(e,{params:t}),post:(e,t)=>r.post(e,t),put:(e,t)=>r.put(e,t),delete:e=>r.delete(e),patch:(e,t)=>r.patch(e,t)};export{i as t};